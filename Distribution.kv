#: import FadeTransiton kivy.uix.screenmanager.FadeTransition
<SelectableLabel>:
    machine_name: ''
    machine_load: ''
    breaker_size: ''
    cable_size: ''
    canvas.before:
        Color:
            rgba: (.0, 0.4, .1, .3) if self.selected else (.1, .1, .1, 1)
        Rectangle:
            pos: self.pos
            size: self.size
    text: root.machine_name+'     Load('+root.machine_load+'kVA)     Breaker('+root.breaker_size+'A)     Cable('+root.cable_size+'mm)'

DistributionApp:
    transition: FadeTransiton()
    LaunchPage:
    PowerInputPage:
    IlluminationPage:

<LaunchPage>:
    name: "launch_screen"
    BoxLayout:
        orientation: "vertical"
        padding: 50
        height: "250dp"
        size_hint_y: None
        pos_hint: {'center_x':.5, 'center_y': .5}
        Label:
            text: "Distribution | Illumination"
            font_size: 60
            color: 0.5, 1, 1, 1
        Label:
            text: "Babatunde Nathaniel AYENI, 20130795"
            font_size: 20
        Button:
            text: "LAUNCH APPLICATION"
            font_size: 25
            background_color: 0.5, 1, 1, 1
            on_press: root.manager.current = 'power_screen'

<PowerInputPage>:
    name: 'power_screen'
    orientation: 'vertical'
    numMachines: num_machines
    numSections: num_sections
    normalVoltage: normal_voltage
    utilityVoltage: utility_voltage
    growthFactor: growth_factor
    deratingFactor: derating_factor
    loadingFactor: loading_factor
    dispMachineNumError: disp_machine_num_error
    machineName: machine_name
    machineLoad: machine_load
    machineFactor: machine_factor
    dropMachineSection: drop_machine_section
    buttAddMachine: butt_add_machine
    dispMachineListHeader: display_machine_list_header
    dispMachinesList: display_machines_list
    #dispMachineDetail: display_machine_detail
    #dispMachineName: disp_machine_name
    #dispMachineSec: disp_machine_sec
    #dispMachineLoad: disp_machine_load
    powerViewboard: power_viewboard
    canvas.before:
        Color:
            rgba: 1, 1, 0, .6
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: 0.06
            pos_hint: {'top': 1}
            padding: 15, 0, 15, 0
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
            Label:
                text: 'Power Distribution'
                text_size: self.size
                color: 1, 1, 1, 1
                halign: 'left'
                valign: 'middle'
            Button:
                size_hint_x: 0.2
                text: 'Distribution'
                color: 0.5, 1, 1, 1
                background_color: 0.5, 0.5, 0.5, 1
                on_press: root.manager.current = 'power_screen'
            Button:
                size_hint_x: 0.2
                text: 'Illumination'
                color: 0.5, 1, 1, 1
                background_color: 0.5, 0.5, 0.5, 1
                on_press: root.manager.current = 'illumination_screen'
        GridLayout:
            cols: 2
            rows: 2
            spacing: 5
            padding: 5
            BoxLayout:
                orientation: 'vertical'
                size_hint_x: 0.5
                padding: 10, 0, 10, 0
                Label:
                    text: "ENTER POWER PARAMETERS"
                    color: 0, 0, 0, 1
                    font_size: 17
                BoxLayout:
                    size_hint_y: 1
                    Label:
                        text: "Number of Machines"
                        color: 0, 0, 0, 1
                        size_hint_x: 0.5
                    TextInput:
                        id: num_machines
                        multiline: False
                        keyboard_suggestions: False
                        allow_copy: False
                        size_hint_x: 0.2
                BoxLayout:
                    size_hint_y: 1
                    Label:
                        text: "Number of Sections"
                        color: 0, 0, 0, 1
                        size_hint_x: 0.5
                    TextInput:
                        id: num_sections
                        multiline: False
                        keyboard_suggestions: False
                        allow_copy: False
                        size_hint_x: 0.2
                BoxLayout:
                    size_hint_y: 1
                    Label:
                        text: "Normal Voltage"
                        color: 0, 0, 0, 1
                        size_hint_x: 0.5
                    TextInput:
                        id: normal_voltage
                        text: '415'
                        multiline: False
                        keyboard_suggestions: False
                        allow_copy: False
                        size_hint_x: 0.2
                BoxLayout:
                    size_hint_y: 1
                    Label:
                        text: "Utility Voltage"
                        color: 0, 0, 0, 1
                        size_hint_x: 0.5
                    TextInput:
                        id: utility_voltage
                        text: '11000'
                        multiline: False
                        keyboard_suggestions: False
                        allow_copy: False
                        size_hint_x: 0.2
                BoxLayout:
                    size_hint_y: 1
                    Label:
                        text: "Growth factor"
                        color: 0, 0, 0, 1
                        size_hint_x: 0.5
                    TextInput:
                        id: growth_factor
                        text: '1.25'
                        multiline: False
                        keyboard_suggestions: False
                        allow_copy: False
                        size_hint_x: 0.2
                BoxLayout:
                    size_hint_y: 1
                    Label:
                        text: "Derating factor"
                        color: 0, 0, 0, 1
                        size_hint_x: 0.5
                    TextInput:
                        id: derating_factor
                        text: '1.25'
                        multiline: False
                        keyboard_suggestions: False
                        allow_copy: False
                        size_hint_x: 0.2
                BoxLayout:
                    size_hint_y: 1
                    Label:
                        text: "Load factor"
                        color: 0, 0, 0, 1
                        size_hint_x: 0.5
                    TextInput:
                        id: loading_factor
                        text: '0.8'
                        multiline: False
                        keyboard_suggestions: False
                        allow_copy: False
                        size_hint_x: 0.2
                BoxLayout:
                    size_hint_y: 1
                    spacing: 10
                    Button:
                        text: 'Compute Power'
                        size_hint_x: 0.7
                        background_color: 0.5, 0.5, 0.5, 1
                        on_press:
                            root.calculatePowerInputs(num_machines.text, num_sections.text)
                            root.selectMachineSection(num_sections.text)
                    Button:
                        text: 'Reset'
                        background_color: 0.5, 0.5, 0.5, 1
                        size_hint_x: 0.3
                        on_press:
                            #machine_inputs.clear_widgets()
                            num_machines.text = ''
                            num_sections.text = ''
                            normal_voltage.text = '415'
                            utility_voltage.text = '11000'
                            growth_factor.text = '1.25'
                            derating_factor.text = '1.25'
                            loading_factor.text = '0.8'
                            machine_name.text = ''
                            machine_load.text = ''
                            disp_machine_num_error.text = 'MACHINE PARAMETERS'
                            disp_machine_num_error.italic = False
                            disp_machine_num_error.color = 0, 0, 0, 1
                            drop_machine_section.text = 'Select Machine Section'
                            drop_machine_section.values = []
                            butt_add_machine.text = 'Add Machine'
                            display_machine_list_header.text = 'Compute and add machine to populate machine list'
                            display_machines_list.data = []
            BoxLayout:
                orientation: 'vertical'
                size_hint_x: 1
                Label:
                    id: power_viewboard
                    size_hint_x: 1
                    text: 'POWER VIEWBOARD'
                    color: 0,0,0,1
            BoxLayout:
                orientation: 'vertical'
                size_hint_x: 0.5
                spacing: 5
                padding: 10
                Label:
                    id: disp_machine_num_error
                    text: 'MACHINE PARAMETERS'
                    color: 0, 0, 0, 1
                    font_size: 17
                BoxLayout:
                    Label:
                        text: 'Name'
                        size_hint_x: 0.3
                        color: 0, 0, 0, 1
                    TextInput:
                        id: machine_name
                        multiline: False
                        keyboard_suggestions: False
                        allow_copy: False
                        size_hint_x: 0.7
                BoxLayout:
                    padding: 25, 0, 25, 0
                    Label:
                        text: 'Power (load) in kVA'
                        size_hint_x: 0.5
                        color: 0, 0, 0, 1
                    TextInput:
                        id: machine_load
                        multiline: False
                        keyboard_suggestions: False
                        allow_copy: False
                        size_hint_x: 0.2
                BoxLayout:
                    padding: 25, 0, 25, 0
                    Label:
                        text: 'Power factor'
                        size_hint_x: 0.5
                        color: 0, 0, 0, 1
                    TextInput:
                        id: machine_factor
                        multiline: False
                        keyboard_suggestions: False
                        allow_copy: False
                        size_hint_x: 0.2
                BoxLayout:
                    padding: 25, 0, 25, 0
                    Spinner:
                        #Display a button for machine section
                        id: drop_machine_section
                        text: 'Select Machine Section'
                        values: []
                        background_color: 0.5, 0.4, 0.5, 1
                        #on_text: root.dropdownsel(drop_machine_section.text)
                Button:
                    id: butt_add_machine
                    text: 'Add Machine'
                    background_color: 0.5, 0.5, 0.5, 1
                    on_press:
                        root.addMachineParameters(num_machines.text, num_sections.text, machine_load.text, drop_machine_section.text)
            BoxLayout:
                orientation: 'vertical'
                BoxLayout:
                    size_hint_y: 0.1
                    pos_hint: {'top': 1}
                    padding: 5, 0, 5, 0
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5
                        Rectangle:
                            pos: self.pos
                            size: self.size
                    Label:
                        id: display_machine_list_header
                        text: 'Compute and add machine to populate machine list'
                        text_size: self.size
                        color: 1, 1, 1, 1
                        halign: 'left'
                        valign: 'middle'
                BoxLayout:
                    orientation: 'horizontal'
                    BoxLayout:
                        orientation: 'vertical'
                        size_hint_x: 0.5
                        RecycleView:
                            id: display_machines_list
                            bar_width: '10dp'
                            scroll_type: ['bars', 'content']
                            viewclass: 'SelectableLabel'
                            SelectableRecycleBoxLayout:
                                orientation: 'vertical'
                                default_size: self.width, 30
                                default_size_hint: 1, None
                                size_hint_y: None
                                height: self.minimum_height
                                spacing: 2
<IlluminationPage>:
    name: 'illumination_screen'
    lengthOfRoom: length_of_room
    breadthOfRoom: breadth_of_room
    workingHeight: working_height
    wattMSq: watt_per_meter_sq
    lampL: lamp_lumen
    numL: no_of_each_luminaire
    mainFac: maintenance_factor
    dispIllumination: display_illumination
    dispLampDistributions: display_lamp_distributions
    orientation: "vertical"
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: 0.06
            pos_hint: {'top': 1}
            padding: 15, 0, 15, 0
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
            Label:
                text: 'Power Distribution'
                text_size: self.size
                color: 1, 1, 1, 1
                halign: 'left'
                valign: 'middle'
            Button:
                size_hint_x: 0.2
                text: 'Distribution'
                color: 0.5, 1, 1, 1
                background_color: 0.5, 0.5, 0.5, 1
                on_press: root.manager.current = 'power_screen'
            Button:
                size_hint_x: 0.2
                text: 'Illumination'
                color: 0.5, 1, 1, 1
                background_color: 0.5, 0.5, 0.5, 1
                on_press: root.manager.current = 'illumination_screen'
        BoxLayout:
            orientation: 'horizontal'
            canvas.before:
                Color:
                    rgba: .5, .5, 0, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
            BoxLayout:
                orientation: 'horizontal'
                padding: 5
                height: "300dp"
                size_hint_y: None
                pos_hint: {'center_x':.5, 'center_y': .5}
                GridLayout:
                    cols: 2
                    rows: 1
                    spacing: 2
                    padding: 2
                    BoxLayout:
                        orientation: 'vertical'
                        padding: 15, 0, 15, 0
                        BoxLayout:
                            size_hint_y: 1
                            Label:
                                text: "Length"
                                color: 0, 0, 0, 1
                                size_hint_x: 0.5
                            TextInput:
                                id: length_of_room
                                multiline: False
                                keyboard_suggestions: False
                                allow_copy: False
                                size_hint_x: 0.2
                        BoxLayout:
                            size_hint_y: 1
                            Label:
                                text: "Breadth"
                                color: 0, 0, 0, 1
                                size_hint_x: 0.5
                            TextInput:
                                id: breadth_of_room
                                multiline: False
                                keyboard_suggestions: False
                                allow_copy: False
                                size_hint_x: 0.2
                        BoxLayout:
                            size_hint_y: 1
                            Label:
                                text: "Working height"
                                color: 0, 0, 0, 1
                                size_hint_x: 0.5
                            TextInput:
                                id: working_height
                                multiline: False
                                keyboard_suggestions: False
                                allow_copy: False
                                size_hint_x: 0.2
                        BoxLayout:
                            size_hint_y: 1
                            Label:
                                text: "Watt/meter sq"
                                color: 0, 0, 0, 1
                                size_hint_x: 0.5
                            TextInput:
                                id: watt_per_meter_sq
                                multiline: False
                                keyboard_suggestions: False
                                allow_copy: False
                                size_hint_x: 0.2
                        BoxLayout:
                            Label:
                                text: "Lamp Lumen"
                                color: 0, 0, 0, 1
                                #size_hint_x: 0.5
                            Spinner:
                                #Display a button for machine section
                                id: lamp_lumen
                                text: 'Lamp lumen'
                                values: ['Thorn forceLED (120)', 'Thorn forceLED pro (137)', 'Tonic Gimbal (100)', 'HiPak proLED (135)']
                                background_color: 0.5, 0.4, 0.5, 1
                                #on_text: root.dropdownsel(drop_machine_section.text)
                        BoxLayout:
                            size_hint_y: 1
                            Label:
                                text: "Number of each luminaire"
                                color: 0, 0, 0, 1
                                size_hint_x: 0.5
                            TextInput:
                                id: no_of_each_luminaire
                                multiline: False
                                keyboard_suggestions: False
                                allow_copy: False
                                size_hint_x: 0.2
                        BoxLayout:
                            Label:
                                text: "Maintenance Factor"
                                color: 0, 0, 0, 1
                                size_hint_x: 0.5
                            Spinner:
                                #Display a button for machine section
                                id: maintenance_factor
                                text: 'Maintenance factor'
                                values: ['0.6', '0.7', '0.8']
                                background_color: 0.5, 0.4, 0.5, 1
                                size_hint_x: 0.5
                                #on_text: root.dropdownsel(drop_machine_section.text)
                        Button:
                            id: butt_calc_light
                            text: 'Calculate Lamps'
                            background_color: 0.5, 0.5, 0.5, 1
                            on_press: root.calculateLampsNeeded(length_of_room.text, breadth_of_room.text, working_height.text, watt_per_meter_sq.text, lamp_lumen.text, no_of_each_luminaire.text, maintenance_factor.text)
                    BoxLayout:
                        orientation: 'vertical'
                        BoxLayout:
                            size_hint_y: 1
                            Label:
                                id: display_illumination
                                text: 'Calculate Lamp Distribution'
                                color: 0,0,0,1
                        BoxLayout:
                            size_hint_y: 1
                            Label:
                                id: display_lamp_distributions
                                text: ''
